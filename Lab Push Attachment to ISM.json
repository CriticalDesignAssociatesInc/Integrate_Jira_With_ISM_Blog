{"rules":[{"id":1492301,"clientKey":"a5b0c42b-a2ed-31be-9d92-1a63a44d36d9","name":"Lab Push Attachment to ISM","state":"DISABLED","description":"Sends attachment link and filename to corresponding release in ISM and triggers the Get New Attachment quick action and script in ISM that pulls the attachment from Jira to ISM.","authorAccountId":"5f7f2ab8a2909600754ff716","actor":{"type":"ACCOUNT_ID","value":"557058:f58131cb-b67d-43c7-b30d-6b58d40bd077"},"created":1609367731014,"updated":1609787176390,"trigger":{"id":"30414982","component":"TRIGGER","parentId":null,"conditionParentId":null,"schemaVersion":1,"type":"jira.incoming.webhook","value":{"webhookToken":"39aa391c3dd3af894e4e3c7e2220d898f4283d88","searchOrProvide":"provided","jql":null},"children":[],"conditions":[]},"components":[{"id":"30414983","component":"CONDITION","parentId":null,"conditionParentId":null,"schemaVersion":1,"type":"jira.comparator.condition","value":{"first":"{{webhookData.attachment.author.accountId}}","second":"ID_OF_SERVICE_ACCOUNT_FROM_URL","operator":"NOT_EQUALS"},"children":[],"conditions":[]},{"id":"30414984","component":"ACTION","parentId":null,"conditionParentId":null,"schemaVersion":1,"type":"jira.issue.outgoing.webhook","value":{"url":"https://YOUR_ISM_TENANT_URL/api/odata/businessobject/releaseprojects('{{issue.customfield_ISM_RECID_ID}}')","headers":[{"id":"_header_1603907466661","name":"Authorization","value":"rest_api_key=ISM_API_KEY"},{"id":"_header_1603907488370","name":"Content-Type","value":"application/json"}],"sendIssue":false,"contentType":"custom","customBody":"{\n    \"LAB_JIRAAttachmentContentURL\" : \"{{webhookData.attachment.content}}\",\n    \"LAB_JIRAAttachmentFilename\" : \"{{webhookData.attachment.filename}}\"\n}","method":"PUT","responseEnabled":true},"children":[],"conditions":[]},{"id":"30414985","component":"ACTION","parentId":null,"conditionParentId":null,"schemaVersion":1,"type":"jira.issue.outgoing.webhook","value":{"url":"https://criticaldesign.trysaasit.com/api/odata/businessobject/releaseprojects('{{issue.customfield_ISM_RECID_ID}}')/Lab_Quick_Action_Get_New_Attachment_From_JIRA","headers":[{"id":"_header_1603298705827","name":"Authorization","value":"rest_api_key=ISM_API_KEY"},{"id":"_header_1603299842619","name":"Content-Type","value":"application/json"}],"sendIssue":false,"contentType":"custom","customBody":"{\n\"ActionId\" : \"ID_FOR_GET_ATTACHMENT_QUICK_ACTION\",\n\"ShouldSave\": false,\n\"ActionParams\": {\n\"FormParams\":{\n\"actionId\":\"ID_FOR_GET_ATTACHMENT_QUICK_ACTION\",\n\"actualObjectType\":\"ReleaseProject#\",\n\"objectId\":\"{{issue.customfield_ISM_RECID_ID}}\"\n},\n\"GridParams\": null\n},\n\"PromptParams\":[\n{\n\"__type\": \"DataLayer.PromptData\",\n \n\"ActionId\": null,\n\"ActionObjectId\": null,\n\"PromptObjectId\": \"{{issue.customfield_ISM_RECID_ID}}\",\n\"ActionObjectType\": \"ReleaseProject#\",\n\"PromptObjectType\": \"ReleaseProject#\",\n\"Value\": \"Closed\",\n \n \n\"FieldName\": \"Status\",\n \n \n\"IsNewPrompt\": true\n},\n{\n\"__type\": \"DataLayer.PromptData\",\n\"Label\": \"Select Cause Code\",\n\"ActionId\": \"ID_FOR_GET_ATTACHMENT_QUICK_ACTION\",\n\"ActionObjectId\": \"{{issue.customfield_ISM_RECID_ID}}\",\n\"PromptObjectId\": \"{{issue.customfield_ISM_RECID_ID}}\",\n\"ActionObjectType\": \"ReleaseProject#\",\n\"PromptObjectType\": \"ReleaseProject#\",\n\"Value\": \"Documentation Request\",\n\"ValidList\": \"Incident Cause Code\",\n\"FieldName\": \"CauseCode\",\n\"FieldType\": \"list\",\n\"FieldLength\": 40,\n\"Precision\": 0,\n\"FieldAreaWidth\": 400,\n\"FieldAreaHeight\": 200,\n\"Password\": false,\n\"Required\": true,\n\"DefaultValue\": \"\",\n\"Hidden\": false,\n\"IsNewPrompt\": true\n},\n{\n\"__type\": \"DataLayer.PromptData\",\n\"Label\": \"Is first call resolution?\",\n\"ActionId\": \"ID_FOR_GET_ATTACHMENT_QUICK_ACTION\",\n\"ActionObjectId\": \"{{issue.customfield_ISM_RECID_ID}}\",\n\"PromptObjectId\": \"{{issue.customfield_ISM_RECID_ID}}\",\n\"ActionObjectType\": \"ReleaseProject#\",\n\"PromptObjectType\": \"ReleaseProject#\",\n\"Value\": null,\n\"ValidList\": \"\",\n\"FieldName\": \"FirstCallResolution\",\n\"FieldType\": \"boolean\",\n\"FieldLength\": 0,\n\"Precision\": 0,\n\"FieldAreaWidth\": 0,\n\"FieldAreaHeight\": 0,\n\"Password\": false,\n\"Required\": false,\n\"DefaultValue\": null,\n\"Hidden\": false,\n\"IsNewPrompt\": true\n},\n{\n\"__type\": \"DataLayer.PromptData\",\n\"Label\": \"Resolution\",\n\"ActionId\": \"ID_FOR_GET_ATTACHMENT_QUICK_ACTION\",\n\"ActionObjectId\": \"{{issue.customfield_ISM_RECID_ID}}\",\n\"PromptObjectId\": \"{{issue.customfield_ISM_RECID_ID}}\",\n\"ActionObjectType\": \"ReleaseProject#\",\n\"PromptObjectType\": \"ReleaseProject#\",\n\"Value\": \"test\",\n\"ValidList\": \"\",\n\"FieldName\": \"Resolution\",\n\"FieldType\": \"text\",\n\"FieldLength\": 4000,\n\"Precision\": 0,\n\"FieldAreaWidth\": 400,\n\"FieldAreaHeight\": 200,\n\"Password\": false,\n\"Required\": true,\n\"DefaultValue\": \"\",\n\"Hidden\": false,\n\"IsNewPrompt\": true\n}\n]\n}","method":"POST","responseEnabled":false},"children":[],"conditions":[]}],"canOtherRuleTrigger":false,"notifyOnError":"FIRSTERROR","projects":[],"labels":[],"tags":[{"id":1010098,"tagType":"WEBHOOK_TOKEN","tagValue":"39aa391c3dd3af894e4e3c7e2220d898f4283d88"}]}],"cloud":true}
